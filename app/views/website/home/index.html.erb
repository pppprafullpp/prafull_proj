<%= stylesheet_link_tag 'website/owl.carousel' %>
<div id="carousel-example-generic" class="carousel slide hidden-xs" data-ride="carousel">

  <!-- Wrapper for slides -->
  <div class="carousel-inner" role="listbox">
    <div class="item active"> <%= image_tag('website/banner1.png',:alt => 'banner 1') %>
      <div class="carousel-caption">
        <h1> Looking For Best Deals In The Location You Are Moving</h1>
      </div>
    </div>
    <div class="item "> <%= image_tag('website/banner2.png',:alt => 'banner 2') %>
      <div class="carousel-caption">
        <h1> Save Hundredâ€™s Of $ Month On Month & Pick The Best Deals </h1>
      </div>
    </div>

    <!-- Controls -->
    <a class="left carousel-control" href="#carousel-example-generic" role="button" data-slide="prev">
      <span class="fa fa-chevron-left" aria-hidden="true"></span>
      <span class="sr-only">Previous</span>
    </a>
    <a class="right carousel-control" href="#carousel-example-generic" role="button" data-slide="next">
      <span class="fa fa-chevron-right" aria-hidden="true"></span>
      <span class="sr-only">Next </span>
    </a>
    <div class="formcontainer">
      <%=form_tag("/website/home/deal_details", method: :get, :id=>"firstpageform") do%>
        <h2>Please enter valid ZIP Code & Choose Category and Type.</h2>
        <div class="col-md-12">
          <div class="col-md-5 col-xs-offset-1">
            <%=text_field(:zip_code,nil, :class=>"form-control", :placeholder=>"Enter Zip*",:id=>"zip-code", maxlength: 6)%>
            <span class="pos-rel error-msg" id="zip-error">Please enter zipcode.</span>
          </div>
          <div class="col-md-5 ">
            <%= select_tag(:category_id,options_for_select(get_service_categories.first(5)),:class => 'form-control',:prompt => 'Select Service', :id=>"service-type") %>
            <span class="pos-rel error-msg" id="category-type-error">Please choose a category from the list.</span>
          </div>
        </div>
        <div class="row">
          <div class="col-md-2"></div>
          <div class="col-md-8">
            <%= select_tag(:deal_type,options_for_select((AppUser::USER_TYPES.collect{|m| [m.titleize, m]}),nil),:class => 'form-control',:prompt => 'Select your User Type', :id=>"user-type") %>
            <span class="pos-rel error-msg" id="deal-type-error">Please choose User Type from the list.</span>
        </div>
      </div><br />
        <button type="submit" class="btn btn-default btn-red">Enter Now</button>
      <%end%>
    </div>
  </div>
</div>
<!-- //banner -->

<%= render :partial => "website/home/best_deals_carousel"  if @best_deal_data.present? %>
<%= render :partial => "website/home/trending_deals_carousel"  if @trending_deal_data.present? %>

<!--<banner form small device>-->

<%= render :partial => "website/home/small_banner" %>

<!-- //banner -->

<!-- mid part -->
<div class="container serviceCon">
  <!-- Example row of columns -->
  <div class="row">
    <h1 class="text-center">Your One Stop Shop for Telecom Servers and Utilities</h1>
    <!-- <a href="#" class="col-md-4 text-center serviceRow" data-toggle="modal" data-target="#zipcode-modal"> -->
     <!--  <div class="img-circle"><%#= image_tag('website/tv.png',:alt => 'tv') %></div>
      <p>CABLE AND SATELLITE TV</p> -->
    <!-- </a>  -->
    <div class="col-sm-4 col-xs-6 text-center serviceRow">
      <a href="<%= deal_details_website_home_index_path %>?category_id=<%= Deal::BUNDLE_CATEGORY %>&zip_code=<%= get_zipcode_and_user_type %>&deal_type=<%= session[:user_type] %>" >
      <div class="img-circle"><%= image_tag('website/bundel.png',:alt => 'bundle') %></div>
      <p>Bundle</p>
    </a>
    </div>

    <div class="col-sm-4 col-xs-6 text-center serviceRow">
      <a href="<%= deal_details_website_home_index_path %>?category_id=<%= Deal::INTERNET_CATEGORY %>&zip_code=<%= get_zipcode_and_user_type %>&deal_type=<%= session[:user_type] %>" >
      <div class="img-circle"><%= image_tag('website/wifi.png',:alt => 'wifi') %></div>
      <p>Internet</p>
      </a>
    </div>

    <div class="col-sm-4 col-xs-6 text-center serviceRow">
     <a href="<%= deal_details_website_home_index_path %>?category_id=<%= Deal::CABLE_CATEGORY %>&zip_code=<%= get_zipcode_and_user_type %>&deal_type=<%= session[:user_type] %>">
      <div class="img-circle"><%= image_tag('website/tv.png',:alt => 'tv') %></div>
      <p>Cable</p>
    </a>
    </div>




    <div class="col-sm-4 col-xs-6 text-center serviceRow">
      <a href="<%= deal_details_website_home_index_path %>?category_id=<%= Deal::TELEPHONE_CATEGORY %>&zip_code=<%= get_zipcode_and_user_type %>&deal_type=<%= session[:user_type] %>" >
      <div class="img-circle"><%= image_tag('website/phone.png',:alt => 'telephone') %></div>
      <p>Telephone</p>
    </a>
    </div>



  <div class="col-sm-4 col-xs-6 text-center serviceRow">
  <a href="<%= deal_details_website_home_index_path %>?category_id=<%= Deal::CELLPHONE_CATEGORY %>&zip_code=<%= get_zipcode_and_user_type %>&deal_type=<%= session[:user_type] %>" >
    <div class="img-circle"><%= image_tag('website/phone.png',:alt => 'cellphone') %></div>
    <p>Cellphone</p>
  </a>
  </div>
 <!--  </a> <a href="#" class="col-md-4 text-center serviceRow">
    <div class="img-circle"><%#= image_tag('website/electric.png',:alt => 'electricity') %></div>
    <p>ELECTRICITY</p> -->
  </div>
</div>

<!--Client-->
<%= render :partial => "website/home/clients" %>
<%#= render :partial => "website/home/zip_modal" %>

<script type="text/javascript">
    $( document ).ready(function() {
        //$("#zipcode-modal").dialog({modal: true});
        //$( "#zipcode-modal" ).dialog({modal: true});
        //toggleDialog('show');
    });
    $("#firstpageform").submit(function(e){

      var zip=$("#zip-code").val();
      var service_type=$("#service-type option:selected").text();
      var user_type=$("#user-type option:selected").text();
      if(zip.length<5 && service_type=="Select Service" && user_type=="Select your User Type"){
        $("#zip-error").css("display","block");
        $("#category-type-error").css("display","block");
        $("#deal-type-error").css("display","block");
          e.preventDefault();
      }
      else if(zip==""){
          $("#zip-error").css("display","block");
          $("#category-type-error").css("display","none");
          $("#deal-type-error").css("display","none");  e.preventDefault();
      }
        else if(zip.length<5){
          $("#zip-error").html("zip should be of 5 digits");
          $("#zip-error").css("display","block");
          $("#category-type-error").css("display","none");
          $("#deal-type-error").css("display","none");  e.preventDefault();
        }
      else if(service_type=="Select Service"){
        $("#category-type-error").css("display","block");
        $("#zip-error").css("display","none");
        $("#deal-type-error").css("display","none");
        e.preventDefault();
      }
      else if(user_type=="Select your User Type"){
        $("#deal-type-error").css("display","block");
        $("#category-type-error").css("display","none");
        $("#zip-error").css("display","none");
        e.preventDefault();
      }
      else {
        $("#firstpageform").submit();
      }
      console.log(zip.length+" "+service_type+" "+user_type);
    })
    var dialogOpen = false, lastFocus, dialog, pagebackground;
    function toggleDialog(sh) {
        alert(sh)
        dialog = document.getElementById("zipcode-modal");
        pagebackground = document.getElementById("zipcode-modal");

        if (sh == "show") {
            dialogOpen = true;

            // show the dialog
            dialog.style.display = 'block';

            // only hide the background *after* you've moved focus out of the content that will be "hidden"
            //pagebackground.setAttribute("aria-hidden","true");

        } else {
            dialogOpen = false;
            dialog.style.display = 'none';
            pagebackground.setAttribute("aria-hidden","false");
            lastFocus.focus();
        }
    }

    $(window).load(function(){
        $("#sticky-top").sticky({ topSpacing: 0 });
    });
</script>

<%= javascript_include_tag 'website/owl.carousel' %>
