<%#= stylesheet_link_tag 'website/owl.carousel' %>
<div id="carousel-example-generic" class="carousel slide" data-ride="carousel">
  <!-- Wrapper for slides -->
  <div class="carousel-inner" role="listbox">
    <div class="item active"> <%= image_tag('website/banner1.png',:alt => 'banner 1') %>
      <div class="carousel-caption">
        <h1>Moving? Find Best Deals for Your New Coordinates</h1>
      </div>
    </div>
    <div class="item "> <%= image_tag('website/banner2.png',:alt => 'banner 2') %>
      <div class="carousel-caption">
        <h1> Pick Best Deals, Switch and Save $1000s</h1>
      </div>
    </div>

    <!-- Controls -->
    <a class="left carousel-control" href="#carousel-example-generic" role="button" data-slide="prev">
      <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
      <span class="sr-only">Previous</span>
    </a>
    <a class="right carousel-control" href="#carousel-example-generic" role="button" data-slide="next">
      <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
      <span class="sr-only">Next </span>
    </a>
    <div class="formcontainer">
      <%=form_tag("/website/home/deal_details", method: :get, :id=>"firstpageform") do%>
        <h2>Please enter valid ZIP Code & Choose Category and Type.</h2>
        <div class="col-md-12">
          <div class="col-md-5 col-xs-offset-1">
            <%=text_field(:zip_code,nil, :class=>"form-control", :placeholder=>"Enter Zip*",:id=>"zip-code", maxlength: 6)%>
            <span class="pos-rel error-msg" id="zip-error">Please enter zipcode.</span>
          </div>
          <div class="col-md-5 ">
            <%= select_tag(:category_id,options_for_select(get_service_categories.first(5)),:class => 'form-control',:prompt => 'Select Service', :id=>"service-type") %>
            <span class="pos-rel error-msg" id="category-type-error">Please choose a category from the list.</span>
          </div>
        </div>
        <div class="row">
          <div class="col-md-2"></div>
          <div class="col-md-8">
            <%= select_tag(:deal_type,options_for_select((AppUser::USER_TYPES.collect{|m| [m.titleize, m]}),nil),:class => 'form-control',:prompt => 'Select your User Type', :id=>"user-type") %>
            <span class="pos-rel error-msg" id="deal-type-error">Please choose User Type from the list.</span>
        </div>
      </div><br />
        <button type="submit" class="btn btn-default btn-blue">Enter Now</button>
      <%end%>
    </div>
  </div>
</div>
<!-- //banner -->



<!--<banner form small device>-->

<%= render :partial => "website/home/small_banner" %>

<!-- //banner -->

<%= render :partial => "website/home/trending_deals_carousel"  if @trending_deal_data.present? %>
<%= render :partial => "website/home/best_deals_carousel"  if @best_deal_data.present? %>

<!-- mid part -->


<section class="service-div">
<div class="container serviceCon">
  <div class="row">
    <h1 class="text-center">Your One Stop Shop for Telecom Servers and Utilities</h1>
    <div class="col-sm-4 col-xs-6 text-center serviceRow">
      <a href="<%= deal_details_website_home_index_path %>?category_id=<%= Deal::BUNDLE_CATEGORY %>&zip_code=<%= get_zipcode_and_user_type %>&deal_type=<%= session[:user_type] %>" >
      <div class="img-circle"><%= image_tag('website/bundel.png',:alt => 'bundle') %></div>
      <p>Bundle</p>
    </a>
    </div>

    <div class="col-sm-4 col-xs-6 text-center serviceRow">
      <a href="<%= deal_details_website_home_index_path %>?category_id=<%= Deal::INTERNET_CATEGORY %>&zip_code=<%= get_zipcode_and_user_type %>&deal_type=<%= session[:user_type] %>" >
      <div class="img-circle"><%= image_tag('website/wifi.png',:alt => 'wifi') %></div>
      <p>Internet</p>
      </a>
    </div>

    <div class="col-sm-4 col-xs-6 text-center serviceRow">
     <a href="<%= deal_details_website_home_index_path %>?category_id=<%= Deal::CABLE_CATEGORY %>&zip_code=<%= get_zipcode_and_user_type %>&deal_type=<%= session[:user_type] %>">
      <div class="img-circle"><%= image_tag('website/tv.png',:alt => 'tv') %></div>
      <p>Cable</p>
    </a>
    </div>

    <div class="col-sm-4 col-xs-6 text-center serviceRow">
      <a href="<%= deal_details_website_home_index_path %>?category_id=<%= Deal::TELEPHONE_CATEGORY %>&zip_code=<%= get_zipcode_and_user_type %>&deal_type=<%= session[:user_type] %>" >
      <div class="img-circle"><%= image_tag('website/phone.png',:alt => 'telephone') %></div>
      <p>Telephone</p>
    </a>
    </div>

  <div class="col-sm-4 col-xs-6 text-center serviceRow">
  <a href="<%= deal_details_website_home_index_path %>?category_id=<%= Deal::CELLPHONE_CATEGORY %>&zip_code=<%= get_zipcode_and_user_type %>&deal_type=<%= session[:user_type] %>" >
    <div class="img-circle"><%= image_tag('website/cellphone.png',:alt => 'cellphone') %></div>
    <p>Cellphone</p>
  </a>
  </div>
  </div>
</div>
</section>
<div class="modal fade" id="comparePopup" role="dialog"  data-backdrop="static" data-keyboard="false">
  <div class="modal-dialog">
    <!-- Modal content-->
    <button type="button" class="close log-pop-btn" data-dismiss="modal" onclick="calculate_you_save()">Ã—</button>
      <div class="modal-content compare-popsty">
        <div id="welcome-popup">
        <div class="text-center">
        <img src="/assets/website/welcome1.png" alt="" width="150">
        </div>
        <p class=" text-center">Most of our users <span style="color:#2c9d12; font-weight:400;">$ave </span>$1,000 - $2,000 when they switch <span style="color:#e50005; font-weight:600;">Internet, Telephone, TV,</span> and <span  style="color:#e50005; font-weight:600;">Mobile Phone</span>
        services using ServiceDeals. </p>
          <p class=" text-center">We can start to find out how much you can <span style="color:#2c9d12; font-weight:400;">$ave </span> by comparing your current services with the best deals in your area. Just give us 5 min and we will show you $1000s of saving:</p>
          <ul class="info_listing">
            <li><span>1</span>Enter your Internet, Telephone, TV, and Mobile service information</li>
            <li><span>2</span>Review potential saving calculated by ServiceDeals will compare your service and prices with the best deal in your area</li>
            <li><span>3</span>Review potential saving and switch</li>
          </ul>
          <div class=" text-center">
            <button type="button" onclick="move_next()" class="btn compare-btn">Compare</button>
          </div>
      </div>
      <div id="internet_pref" style="display:none;">
        <%=render :partial => "internet_preferences0.html.erb"%>
      </div>
      <div id="telephone_pref" style="display:none;height:440px;overflow-y:scroll;overflow-x:hidden">
        <%=render :partial => "telephone_preferences0.html.erb"%>
      </div>
      <div id="cable_pref" style="display:none;height:320px">
        <%=render :partial => "cable_preferences0.html.erb"%>
      </div>
      <div id="cellphone_pref" style="display:none;height:400px;overflow-y:scroll;overflow-x:hidden">
        <%=render :partial => "cellphone_preferences0.html.erb"%>
      </div>
      <div id="bundle_pref" style="display:none;height:400px;overflow-y:scroll;overflow-x:hidden">
        <%=render :partial => "bundle_preferences0.html.erb"%>
      </div>
      <div id="onwait" style="background-color: #000;height: 100%;    position: absolute;    top: 1px;    width: 100%;    opacity: 0.3;">
       <i id="wait-spinner" style="position: absolute;top: 50%;left: 43%;color: #fafafa;" class="fa fa-spinner fa-pulse fa-4x fa-fw fa-spin"></i>
      </div>
    </div>
  </div>
</div>
<!-- Internet, Telephone, cable, Cellphone, Bundle. -->
<script type="text/javascript">
  function move_next() {
    $("#welcome-popup").hide();
    $("#internet_pref").show().css("height","322px");
  }

  function calculate_you_save(){
    $.ajax({
      url:"/api/v1/you_save",
      type: "GET",
      data: {
       id:<%=session[:user_id]%>
      },
      success: function(data){
         alert("you save: $"+data["you_save"]);
         window.open("/website/home", "_self");
      }
    });
  }
  </script>


  </script>
    <%if params[:new_user] == "true"%>
    <script>
      $("#comparePopup").modal("show");
    </script>
  <%end%>


<!--Client-->
<%= render :partial => "website/home/clients" %>
<%#= render :partial => "website/home/zip_modal" %>

<script type="text/javascript">
    $( document ).ready(function() {
        //$("#zipcode-modal").dialog({modal: true});
        //$( "#zipcode-modal" ).dialog({modal: true});
        //toggleDialog('show');
        $("#onwait").hide();
        $("#wait-spinner").hide();
        $(document).ajaxStart(function() {
          $("#onwait").show();
          $("#wait-spinner").show();
        });
        $(document).ajaxStop(function() {
          $("#onwait").hide();
          $("#wait-spinner").hide();
        });
        $("#business_name").css("text-transform","capitalize")
    });
    $("#firstpageform").submit(function(e){

      var zip=$("#zip-code").val();
      var service_type=$("#service-type option:selected").text();
      var user_type=$("#user-type option:selected").text();
      if(zip.length<5 && service_type=="Select Service" && user_type=="Select your User Type"){
        $("#zip-error").css("display","block");
        $("#category-type-error").css("display","block");
        $("#deal-type-error").css("display","block");
          e.preventDefault();
      }
      else if(zip==""){
          $("#zip-error").css("display","block");
          $("#category-type-error").css("display","none");
          $("#deal-type-error").css("display","none");  e.preventDefault();
      }
        else if(zip.length<5){
          $("#zip-error").html("zip should be of 5 digits");
          $("#zip-error").css("display","block");
          $("#category-type-error").css("display","none");
          $("#deal-type-error").css("display","none");  e.preventDefault();
        }
      else if(service_type=="Select Service"){
        $("#category-type-error").css("display","block");
        $("#zip-error").css("display","none");
        $("#deal-type-error").css("display","none");
        e.preventDefault();
      }
      else if(user_type=="Select your User Type"){
        $("#deal-type-error").css("display","block");
        $("#category-type-error").css("display","none");
        $("#zip-error").css("display","none");
        e.preventDefault();
      }
      else {
        $("#firstpageform").submit();
      }
      console.log(zip.length+" "+service_type+" "+user_type);
    })
    var dialogOpen = false, lastFocus, dialog, pagebackground;
    function toggleDialog(sh) {
        alert(sh)
        dialog = document.getElementById("zipcode-modal");
        pagebackground = document.getElementById("zipcode-modal");

        if (sh == "show") {
            dialogOpen = true;

            // show the dialog
            dialog.style.display = 'block';

            // only hide the background *after* you've moved focus out of the content that will be "hidden"
            //pagebackground.setAttribute("aria-hidden","true");

        } else {
            dialogOpen = false;
            dialog.style.display = 'none';
            pagebackground.setAttribute("aria-hidden","false");
            lastFocus.focus();
        }
    }

    $(window).load(function(){
        $("#sticky-top").sticky({ topSpacing: 0 });

    });
</script>

<%#= javascript_include_tag 'website/owl.carousel' %>
