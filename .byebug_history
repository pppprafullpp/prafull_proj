c
effective_price.to_f
effective_price.to_i
effective_price
effective_price != self.deal_price.to_f
self.additional_offers.present?
      effective_price+=equipment.price
equipment.present?
    effective_price=self.deal_price.to_f
    equipment=internet.internet_equipments.first
    internet=self.internet_deal_attributes.first
self.telephone_deal_attributes.present?
self.internet_deal_attributes.present?
self
params
c
params
c
params
c
params
c
params
c
params
c
params
c
CellphoneDealAttribute.where(deal_id: 126).where(no_of_lines: 3).first.effective_price
CellphoneDealAttribute.where(deal_id: 126).where(no_of_lines: 3).first
CellphoneDealAttribute.where(deal_id: 126).where(no_of_lines: 3)
CellphoneDealAttribute.where(deal_id: @deal.id).where(no_of_lines: no_of_lines)
CellphoneDealAttribute.where(deal_id: 126).where(no_of_lines: 3)
CellphoneDealAttribute.where(deal_id: 126)
CellphoneDealAttribute.last
CellphoneDealAttribute.all
CellphoneDealAttribute
        CellphoneServicePreference.find_by(service_preference_id: service_preference_id).no_of_lines
        CellphoneServicePreference.find_by(service_preference_id: service_preference_id)
        CellphoneServicePreference.where(service_preference_id: service_preference_id)
        CellphoneServicePreference.where(id: service_preference_id)
        service_preference_id = service_preference.id
        service_preference = @app_user.service_preferences.where(service_category_id =4).first
@deal.service_category_id == 4 && @app_user.service_preferences.present?
@deal.service_category_id == 4 && @app_user.service_preference.present?
CellphoneServicePreference.all
CellphoneServicePreference.last
@app_user.service_preferences.where(service_category_id =4).first.id
@app_user.service_preferences.where(service_category_id =4).first
@app_user.service_preferences.where(service_category_id =4)
@app_user.service_preferences
@deal.service_category_id == 4 && @app_user.service_preferences.present?
@deal.service_category_id == 4 && @app_user.service_preference.present?
      @deal = Deal.find_by_id(params[:deal_id])
      @app_user = AppUser.find(session[:user_id])
      @deal = Deal.find_by_id(params[:deal_id])
      @app_user = AppUser.find(session[:user_id])
params
c
      @dashboard_data = get_category_deals(session[:user_id],params[:category_id],nil,nil,{'sort_by' => params[:sort_by],'provider_ids' => params[:provider_ids]}).first
      @dashboard_data = get_category_deals(session[:user_id],params[:category_id],nil,nil,{'sort_by' => params[:sort_by],'provider_ids' => params[:provider_ids]}).
      @dashboard_data = get_category_deals(session[:user_id],params[:category_id],nil,nil,{'sort_by' => params[:sort_by],'provider_ids' => params[:provider_ids]}).first(2).keys
      @dashboard_data = get_category_deals(session[:user_id],params[:category_id],nil,nil,{'sort_by' => params[:sort_by],'provider_ids' => params[:provider_ids]}).first(2).key
      @dashboard_data = get_category_deals(session[:user_id],params[:category_id],nil,nil,{'sort_by' => params[:sort_by],'provider_ids' => params[:provider_ids]}).first(2).collect(id)
      @dashboard_data = get_category_deals(session[:user_id],params[:category_id],nil,nil,{'sort_by' => params[:sort_by],'provider_ids' => params[:provider_ids]}).first(2)
      @dashboard_data = get_category_deals(session[:user_id],params[:category_id],nil,nil,{'sort_by' => params[:sort_by],'provider_ids' => params[:provider_ids]})
      @dashboard_data = get_category_deals(session[:user_id],params[:category_id],nil,nil,{'sort_by' => params[:sort_by],'provider_ids' => params[:provider_ids]}).pluck('id')
      @dashboard_data = get_category_deals(session[:user_id],params[:category_id],nil,nil,{'sort_by' => params[:sort_by],'provider_ids' => params[:provider_ids]}).pluck(:id)
      @dashboard_data = get_category_deals(session[:user_id],params[:category_id],nil,nil,{'sort_by' => params[:sort_by],'provider_ids' => params[:provider_ids]})
      @dashboard_data = get_category_deals(session[:user_id],params[:category_id],nil,nil,{'sort_by' => params[:sort_by],'provider_ids' => params[:provider_ids]}).first['id']
      @dashboard_data = get_category_deals(session[:user_id],params[:category_id],nil,nil,{'sort_by' => params[:sort_by],'provider_ids' => params[:provider_ids]}).first['id'].to_h
      @dashboard_data = get_category_deals(session[:user_id],params[:category_id],nil,nil,{'sort_by' => params[:sort_by],'provider_ids' => params[:provider_ids]}).first['id'].to_a
      @dashboard_data = get_category_deals(session[:user_id],params[:category_id],nil,nil,{'sort_by' => params[:sort_by],'provider_ids' => params[:provider_ids]}).first['id'].class
      @dashboard_data = get_category_deals(session[:user_id],params[:category_id],nil,nil,{'sort_by' => params[:sort_by],'provider_ids' => params[:provider_ids]}).first['id']
      @dashboard_data = get_category_deals(session[:user_id],params[:category_id],nil,nil,{'sort_by' => params[:sort_by],'provider_ids' => params[:provider_ids]}).first['id'].include?(126)
      @dashboard_data = get_category_deals(session[:user_id],params[:category_id],nil,nil,{'sort_by' => params[:sort_by],'provider_ids' => params[:provider_ids]}).first['id'].includes?(126)
      @dashboard_data = get_category_deals(session[:user_id],params[:category_id],nil,nil,{'sort_by' => params[:sort_by],'provider_ids' => params[:provider_ids]}).first['id']
      @dashboard_data = get_category_deals(session[:user_id],params[:category_id],nil,nil,{'sort_by' => params[:sort_by],'provider_ids' => params[:provider_ids]}).first.id
      @dashboard_data = get_category_deals(session[:user_id],params[:category_id],nil,nil,{'sort_by' => params[:sort_by],'provider_ids' => params[:provider_ids]}).first.map{ |c| [c.id] }
      @dashboard_data = get_category_deals(session[:user_id],params[:category_id],nil,nil,{'sort_by' => params[:sort_by],'provider_ids' => params[:provider_ids]}).first
      @dashboard_data = get_category_deals(session[:user_id],params[:category_id],nil,nil,{'sort_by' => params[:sort_by],'provider_ids' => params[:provider_ids]}).map{ |c| [c.id] }
      @dashboard_data = get_category_deals(session[:user_id],params[:category_id],nil,nil,{'sort_by' => params[:sort_by],'provider_ids' => params[:provider_ids]})
      @dashboard_data = get_category_deals(session[:user_id],params[:category_id],nil,nil,{'sort_by' => params[:sort_by],'provider_ids' => params[:provider_ids]}).map{}
      @dashboard_data = get_category_deals(session[:user_id],params[:category_id],nil,nil,{'sort_by' => params[:sort_by],'provider_ids' => params[:provider_ids]}).map{|fog| fog}
      @dashboard_data = get_category_deals(session[:user_id],params[:category_id],nil,nil,{'sort_by' => params[:sort_by],'provider_ids' => params[:provider_ids]}).map{|fog| fog.id}
      @dashboard_data = get_category_deals(session[:user_id],params[:category_id],nil,nil,{'sort_by' => params[:sort_by],'provider_ids' => params[:provider_ids]})
      @dashboard_data = get_category_deals(session[:user_id],params[:category_id],nil,nil,{'sort_by' => params[:sort_by],'provider_ids' => params[:provider_ids]}).second['effective_price']
      @dashboard_data = get_category_deals(session[:user_id],params[:category_id],nil,nil,{'sort_by' => params[:sort_by],'provider_ids' => params[:provider_ids]}).first['effective_price']
      @dashboard_data = get_category_deals(session[:user_id],params[:category_id],nil,nil,{'sort_by' => params[:sort_by],'provider_ids' => params[:provider_ids]}).first
      @dashboard_data = get_category_deals(session[:user_id],params[:category_id],nil,nil,{'sort_by' => params[:sort_by],'provider_ids' => params[:provider_ids]})
params
c
      @deal.update_effective_price
      @deal = Deal.find_by_id(params[:deal_id])
@app_user = AppUser.find(session[:user_id])
params
parms
c
 referred_contacts = self.find_or_create_by(email_id: params[index][:email_id], mobile_no: params[index][:mobile_no])
 referred_contacts = self.find_or_create_by(email_id: params[index][:email_id], mobile_no: params[index][:mobile_no]])
 referred_contacts = self.find_or_create_by(email_id: params[index][:email_id], mobile_no: params[index[:mobile_no]])
params[index][:email_id]
params[index]
params
params'
c
n
index
n
index
n
index
n
puts "#{index}: #{value}"
index
params.length
params
c
params.length
params
c
puts 
puts "#{index}
puts "#{index}: #{value}"
params
prams
c
params[0][:mobile_no]
params[0]
params[first]
params
referred_contacts = self.find_or_create_by(params[first])
referred_contacts = self.find_or_create_by(params[first][:email_id])
referred_contacts = self.find_or_create_by(params[:email_id])
referred_contacts = self.find_or_create_by(params)
referred_contacts = self.create(params)
params[:email_id
params[:email_is]
params
c
error
c
error
keys = p.keys
error
params
c
params['referred_contacts'].class
params['referred_contacts']
params['referred_contacts'].to_a
params['referred_contacts'].to_h
params['referred_contacts']
params
c
params[:email_id]
params[:email]
params
self
c
        referred_contacts = ReferContactDetail.create_referred_users(params['referred_contacts'])
params.permit!
error
params
c
cc
c
ReferContactDetail.all
c
ReferContactDetail.all
    referred_contacts = self.find_or_create_by(email_id: refer[:email_id] , mobile_no: refer[:mobile_no])
refer[:email_id]
refer[:email]
refer
self
c
params.first[:email_id]
params.first
params.class
params
params[:email_id]
params
self
c
rc
c
index
        referred_contacts = ReferContactDetail.find_or_create_by(email_id: params[:referred_contacts][0][:email_id], mobile_no: params[:referred_contacts][0][:mobile_no])
        referred_contacts = ReferContactDetail.find_or_create_by(email_id: params[:referred_contacts][index][:email_id], mobile_no: params[:referred_contacts][index][:mobile_no])
params
c
params[:referred_contacts][0][:email_id]
params[:referred_contacts][0]
params[:referred_contacts][:first]
params[:referred_contacts][:first][:email_id]
params[:referred_contacts][:email_id]
params[:referred_contacts][:email]
params[:referred_contacts]
params[:referred_cotacts]
params[:referred_cotacts][email_id]
params[email_id]
params[p:email_id]
params
c
referred_contacts = ReferContactDetail.create_referred_users(params['referred_contacts'])
      error = false
params['referred_contacts'].class.to_s == 'Array'
params
c
service_preference = internet_demo_data(500,1)
category_name = ServiceCategory.find(params[:category]).name.downcase
params
c
"#{category_name}_demo_data"
category_name = ServiceCategory.find(params[:category]).name.downcase
eval("#{@category_name.camelcase}DealAttribute")
#{@category_name}_equipment_form
category_name = ServiceCategory.find(params[:category]).name.downcase
ServiceCategory.find(params[:category]).name
ServiceCategory.find(params[:category])
params
c
deal_validation_conditions="deals.is_active=true AND deals.deal_type='"+deal_type+"' AND deals.service_category_id="+sp.service_category_id.to_s+" "
restricted_deals=Deal.joins(:deals_zipcodes).joins(:zipcodes).select("deals.id").where("zipcodes.code= ? ",zip_code)
best_deals = category_best_deal(deal_type,user_preference,zip_code,nil,true)
current_t_plan == true
current_t_plan = user_preference.cellphone_service_preference.domestic_call_unlimited
current_plan_price = user_preference.price
user_preference.present?
category_id == Deal::CELLPHONE_CATEGORY
matched_deal = []
user_preference = app_user.service_preferences.where("service_category_id = ?",category_id).first
deal_validation_conditions="#{filter_by_provider} deals.is_active=true AND deals.deal_type='"+deal_type+"' AND deals.service_category_id=#{category_id}"+" "
restricted_deals=Deal.joins(:deals_zipcodes).joins(:zipcodes).select("deals.id").where("zipcodes.code= ? ",zip_code)
deal_type=app_user.user_type
zip_code = app_user.zip
app_user = AppUser.find_by_id(app_user_id)
app_user_id.present?
filter_by_provider = options['provider_ids'].present? ? "deals.service_provider_id in (#{options['provider_ids']}) AND " : ''
sort_by = options['sort_by'].present? ? options['sort_by'] : 'price ASC'
select_fields_cellphone="deals.*,cellphone_deal_attributes.no_of_lines,cellphone_deal_attributes.price_per_line,cellphone_deal_attributes.domestic_call_minutes,cellphone_deal_attributes.international_call_minutes,cellphone_deal_attributes.domestic_text,cellphone_deal_attributes.international_text,cellphone_deal_attributes.data_plan,cellphone_deal_attributes.additional_data,cellphone_deal_attributes.rollover_data"
category_id = category_id.present? ? category_id.to_i : 1
params
c
best_deals = category_best_deal(deal_type,user_preference,zip_code,nil,true)
current_t_plan == true
current_t_plan = user_preference.cellphone_service_preference.domestic_call_unlimited
current_plan_price = user_preference.price
 user_preference.present?
category_id == Deal::CELLPHONE_CATEGORY
matched_deal = []
user_preference = app_user.service_preferences.where("service_category_id = ?",category_id).first
deal_validation_conditions="#{filter_by_provider} deals.is_active=true AND deals.deal_type='"+deal_type+"' AND deals.service_category_id=#{category_id}"+" "
restricted_deals=Deal.joins(:deals_zipcodes).joins(:zipcodes).select("deals.id").where("zipcodes.code= ? ",zip_code)
deal_type=app_user.user_type
zip_code = app_user.zip
app_user = AppUser.find_by_id(app_user_id)
