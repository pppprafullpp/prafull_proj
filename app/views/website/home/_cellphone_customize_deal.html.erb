<% deal_attributes =  customized_deals['deal_attributes']
deal_equipments = customized_deals['deal_equipments']
deal_extra_services = customized_deals['deal_extra_services']
 %>



<section>
	<div class='equipments-details col-md-12'>
		<h5>Deals Attributes</h5>
		<div id="deal_attributes" class="owl-carousel">
			<% deal_attributes.each do |deal_attribute| %>
				<div class="pull-left">
					<div class="sd-deal-sty">
						<!-- <div onclick="show_modal(<%=deal_attribute.to_json%>,'attribute')"> -->
						<h6 ><%= deal_attribute["description"]%></h6>
						<p>Data Plan Price: $<%=deal_attribute["data_plan_price"]%></p>
						<p>Domestic minutes <%= deal_attribute["domestic_call_minutes"]%></p>
						<p>International minutes <%= deal_attribute["international_call_minutes"]%></p>
					<!-- </div> -->
						<div class="pull-left">
							<div class="checkbox checkbox-info">
	         			<input type="checkbox" id="deal_attribute_<%=deal_attribute['id']%>" name="deal_attributes" val="<%=deal_attribute['id']%>_<%=deal_attribute['data_plan_price'].to_f%>_<%=customized_deals["service_category_name"]%>" />
	          		<label for="deal_attribute_<%=deal_attribute['id']%>" >Select</label>
	        		</div>
		    		</div>
					</div>
				</div>
			<% end %>
		</div>
	</div>


	<div class='equipments-details col-md-12'>
		<h5>Equipments</h5>
		<div id="deal_equipments" class="owl-carousel">
			<% deal_equipments.each do |deal_equipment| %>
				<div class="text-center">
					<div class="sd-deal-sty">
						<!-- <div onclick="show_modal(<%=deal_equipment.to_json%>,'equipment')"> -->
						<h6 ><%=deal_equipment["brand"]%></h6>
						<p id="description_<%=deal_equipment['id']%>" class="hidden"><%=deal_equipment["brand"]%></p>
						<h6><%= deal_equipment['cellphone_name']%></h6>
					<!-- </div> -->
						<%deal_equipment["available_color"].each_with_index do |av,index|%>
							<div class="color-wrapper text-center">
								<input type="radio" checked="checked" name="deviceColors_<%=deal_equipment['id']%>" id="color_<%=deal_equipment['id']%>_<%=av['id']%>" class="colorSelector" />
								<label for="color_<%=deal_equipment['id']%>_<%=av['id']%>" title="<%=index%>" class="colorSelector_label colorSelector_checkShadow" style="background-color: <%=av['color_code']%>" />
							</div>
						<%end%>
						<div class="equip-price"> <span>$<%=deal_equipment["price"]%> </span> </div>
						<div class="text-left">
							<div class="checkbox checkbox-info">
	        			<input type="checkbox" id="deal_equipment_<%=deal_equipment['id']%>" name="deal_equipments"
								val="<%=deal_equipment['id']%>_<%=deal_equipment['price']%>" />
	          		<label for="deal_equipment_<%=deal_equipment['id']%>" >Select</label>
	        		</div>
		    		</div>
					</div>
				</div>
			<%end%>
		</div>
	</div>

	<div class='equipments-details col-md-12'>
		<h5>Deals Extra Services</h5>
		<div id="deal_extra_services" class="owl-carousel">
			<% deal_extra_services.each do |deal_extra_service| %>
				<div class="text-center">
					<div class="sd-deal-sty">
						<!-- <div onclick="show_modal(<%=deal_extra_service.to_json%>,'extra_services')"> -->
							<h6><%=deal_extra_service["service_name"].truncate(12)%></h6>
							<p style="line-height:20px; height:100px; overflow-y:auto;"> <%=deal_extra_service["service_description"]%></p>
							<div class="equip-price"> <span>$ <%="%.2f" % deal_extra_service["price"]%></span> </div>
						<!-- </div> -->
						<div class="text-left">
							<div class="checkbox checkbox-info">
       					<input name="deal_extra_services" type="checkbox" id="deal_extra_service_<%=deal_extra_service['id']%>" val="<%=deal_extra_service['id']%>_<%=deal_extra_service['price']%>" />
								<label for="deal_extra_service_<%=deal_extra_service['id']%>" >Select</label>
        			</div>
	  				</div>
					</div>
				</div>
			<% end %>
		</div>
	</div>


  <div class="modal fade text-left" id="optionsModal" role="dialog" aria-hidden="true"  >
  <div class="modal-dialog">

    <!-- Modal content-->

    <div id="custom_services" class="modal-content" style="height: 100px;">

    	<div id="attribute_div">
    		<div id="attribute_data_plan_price"></div>
    	</div>

    	<div id="equipment_div">
    		<div id="equipment_price">
    			<div class></div>
    		</div>
    	</div>

    	<div id="extra_services_div">
    		<div id="extra_services_price">
    			<div class></div>
    		</div>
    	</div>
      
      </div>	
      </div>	
      </div>	
</section>


<script>
 $('#deal_equipments,#deal_attributes,#deal_extra_services').owlCarousel({
    loop:true,
    margin:10,
    responsiveClass:true,
   items:3,
  });

 function show_modal(data,type) {
 		// $("#"+type+"_div").css("display","none");
 		console.log(type);
 		$('#custom_services').children().addClass('hidden');
 		console.log($("#"+type+"_div"));
		if (type == 'attribute') {
			$("#"+type+"_div").removeClass('hidden');
			// $("#"+type+"_div").css("display","block");
			$("#"+type+'_data_plan_price').html("Price"+data["data_plan_price"]);
		}
		if (type == 'equipment') {
			$("#"+type+"_div").removeClass('hidden');
			// $('#attribute_div').addClass('hidden');

			// $("#"+type+"_div").css("display","block");
			$("#"+type+'_price').html("Price"+data["price"]);
		}
		if (type == 'extra_services') {
			$("#"+type+"_div").removeClass('hidden');
			// $("#"+type+"_div").css("display","block");
			$("#"+type+'_price').html("Name"+data["service_name"]);
		}
   		$("#optionsModal").modal("show");
	}
</script>
